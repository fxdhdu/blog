

**项目中遇到的使用缓存的场景**

- 系统配置（低并发场景、系统本地缓存、存储数据较少）

**双写**

缓存与数据库双存储，更新数据库，既要写缓存又要写数据，称为双写。

**考虑一致性前，先要思考我的系统需要严格的一致性吗？**

 本地系统配置不需要强一致性。严格的一致性会降低读操作的吞吐量。而缓存通常是为了提高读性能，降低数据库的压力。

**系统配置缓存和数据库怎么保证一致性（双存储操作，单一失败导致不一致；并发操作导致不一致）**

- 读请求、写请求通过内存队列（jvm队列）串行化（通过一个线程来处理）。需要根据所操作的数据作为唯一标识，同一个数据的操作路由到同一个节点去处理（Nginx的hash路由）。
- 异步化导致高并发读取时超时，更新操作挤压。需要通过压力测试，增加机器的方式来解决。

**Cache Aside Pattern（缓存模式）**

- 新增配置时：缓存新增，数据库中新增，什么先后顺序比较好。先新增数据库，再新增缓存，防止增加缓存后系统异常，导致数据丢失。
- 更新配置时：更新数据库，再**删除**缓存。（lazy计算思想）
- 删除配置时：先删除缓存，再删除数据库。
- 查询配置时：先读缓存，缓存中没有则读取数据库，并更新到缓存中。

**lazy计算思想**

缓存在集群中的一致性怎么保证

- 集群部署时，每个节点都有自己的缓存，需要节点间保持一致吗？

并发的量级怎么计算

- 每秒的 QPS

有什么缓存中间件可以替代系统本地缓存





这篇文章，我要把里面的关键概念都搞懂

然后画出里面方案的架构图

并最终把里面一些思想用到平时的工作中





## 相关文章

https://mp.weixin.qq.com/s/LMBeCGM-ZPfpIKndOUeCGQ

https://blog.csdn.net/chang384915878/article/details/86756463